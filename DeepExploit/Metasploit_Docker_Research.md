# Metasploit Docker Research

- [Metasploit Docker Research](#metasploit-docker-research)
  - [asdfa](#asdfa)
  - [Spanish Docker-compose with extras](#spanish-docker-compose-with-extras)
  - [setting global configs in msfconsole](#setting-global-configs-in-msfconsole)
  - [Portainer setup of a full lab env with docker-compose](#portainer-setup-of-a-full-lab-env-with-docker-compose)

## asdfa

<https://github.com/pentest-a2p2v/pentest-a2p2v-core/blob/3c36b5a06a4a6f9a24c88455aa3d12f12124fb9d/scripts/run_msfrpcd.sh>
```bash
#!/bin/sh

# Commmand line options
#
#    -a <opt> - The local hostname that the server listens on.
#    -p <opt> - The local port that the server listens on (default: 55553).
#    -U <opt> - The username to access the server.
#    -P <opt> - The password to access the server.
#    -S - Enables or disables SSL on the RPC socket. (default: true)
#    -f - Runs the daemon in the foreground.

USERNAME=msf
PASSWORD=welcome1
PORT=55552
OPTIONS="-S false -f"

docker run \
    --network host \
    -it \
    --rm \
    --name metasploit-api \
    -v ${HOME}/.msf4:/home/msf/.msf4 \
    metasploitframework/metasploit-framework:latest \
    ./msfrpcd -P ${PASSWORD} -U ${USERNAME} -p ${PORT} ${OPTIONS}
```

## Spanish Docker-compose with extras

<https://github.com/MoisesTapia/Hack-Stack/blob/3ba75b6668bb8db5534ecfa0423dcdf4e047e239/README.md>

## setting global configs in msfconsole

```yml
ms:
    environment:
      # example of setting LHOST
      LHOST: 127.0.0.1  
      MSF_UID: 0
      MSF_GID: 0
    # example of adding more ports
```

## Portainer setup of a full lab env with docker-compose
<https://github.com/indigos33k3r/portainer-pentest-lab/blob/1b975b0bbf5f80261b4b683ed5c941395cb4f232/README.md>
